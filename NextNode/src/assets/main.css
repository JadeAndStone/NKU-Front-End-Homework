/* src/assets/main.css */

/* stylelint-disable-next-line at-rule-no-unknown */
@tailwind base;
/* stylelint-disable-next-line at-rule-no-unknown */
@tailwind components;
/* stylelint-disable-next-line at-rule-no-unknown */
@tailwind utilities;

/* ğŸ‘‡ æ ¸å¿ƒä¿®å¤ä»£ç å¼€å§‹ ğŸ‘‡ */

/* 1. é’ˆå¯¹ Tiptap ç¼–è¾‘å™¨å†…éƒ¨çš„ä¿®å¤ */

.ProseMirror em,
.ProseMirror i {
  font-style: italic !important; /* !important ä¿è¯ä¼˜å…ˆçº§æœ€é«˜ */
}

.ProseMirror strong,
.ProseMirror b {
  font-weight: bold !important;
}

/* 2. é’ˆå¯¹ Typography æ’ä»¶å¯èƒ½æ²¡è¦†ç›–åˆ°çš„æƒ…å†µ */
.prose em {
  font-style: italic !important;
}

/* src/assets/main.css */

/* å¾…åŠåˆ—è¡¨æ ·å¼ */
ul[data-type="taskList"] {
  list-style: none; /* å»æ‰é»˜è®¤çš„å°é»‘ç‚¹ */
  padding: 0;
}

ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start; /* å¯¹é½ */
  margin-bottom: 0.5rem;
}

/* å¤é€‰æ¡†æœ¬ä½“ */
ul[data-type="taskList"] li > label {
  margin-right: 0.5rem;
  user-select: none;
  margin-top: 0; /* å¾®è°ƒä½ç½® */
}

/* é€‰ä¸­åçš„æ–‡å­—æ ·å¼ (ç°è‰² + åˆ é™¤çº¿) */
ul[data-type="taskList"] li > div {
  flex: 1;
}

ul[data-type="taskList"] li[data-checked="true"] > div > p {
  text-decoration: line-through;
  color: #9ca3af; /* Tailwind gray-400 */
}

/* ä»£ç å—å®¹å™¨ */
pre {
  background: #0d1117; /* GitHub Dark èƒŒæ™¯è‰² */
  color: #c9d1d9;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  margin: 1.5rem 0;
}

pre code {
  color: inherit;
  padding: 0;
  background: none;
  font-size: 0.9rem;
}

/* main.css */
img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1rem 0;
}

/* 1. ä¿®å¤æ— åºåˆ—è¡¨ (å°é»‘ç‚¹) */
.ProseMirror ul {
  list-style-type: disc !important;
  padding-left: 1.5rem !important; /* ç¼©è¿› */
  margin: 1rem 0;
}

/* 2. ä¿®å¤æœ‰åºåˆ—è¡¨ (æ•°å­— 1. 2. 3.) */
.ProseMirror ol {
  list-style-type: decimal !important;
  padding-left: 1.5rem !important;
  margin: 1rem 0;
}

/* 3. ä¿®å¤åˆ—è¡¨é¡¹é—´è· */
.ProseMirror li {
  margin: 0.2rem 0;
}

/* 4. ä¿®å¤æ ‡é¢˜å¤§å°å’Œç²—ç»† */
.ProseMirror h1 {
  font-size: 2.25rem !important; /* text-4xl */
  font-weight: 800 !important;
  line-height: 1.1;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
}

.ProseMirror h2 {
  font-size: 1.5rem !important; /* text-2xl */
  font-weight: 700 !important;
  margin-top: 1.2rem;
  margin-bottom: 0.5rem;
}

.ProseMirror h3 {
  font-size: 1.25rem !important; /* text-xl */
  font-weight: 600 !important;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

/* 5. é¡ºä¾¿ä¿®å¤ä¸€ä¸‹å¾…åŠäº‹é¡¹ (Task List) çš„æ ·å¼å†²çª */
/* å¾…åŠåˆ—è¡¨ä¸åº”è¯¥æœ‰å°é»‘ç‚¹ */
.ProseMirror ul[data-type="taskList"] {
  list-style: none !important;
  padding-left: 0.5rem !important;
}

.ProseMirror ul[data-type="taskList"] li {
  display: flex;
  gap: 0.5rem;
}

.ProseMirror blockquote {
  border-left: 3px solid #e5e7eb; /* å·¦è¾¹ç°çº¿ */
  padding-left: 1rem;             /* å†…ç¼©è¿› */
  margin: 1rem 0;
  color: #4b5563;                 /* æ–‡å­—å˜ç° */
  font-style: italic;             /* æ–œä½“ */
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #adb5bd; /* æµ…ç°è‰² */
  pointer-events: none;
  height: 0;
  /* è§£å†³æŸäº›æƒ…å†µä¸‹å…‰æ ‡ä½ç½®ä¸å¯¹çš„é—®é¢˜ */
  font-style: normal; 
}
/* æ‹–æ‹½ç›¸å…³å…¨å±€æ ·å¼ */
.ProseMirror .drag-handle {
  opacity: 0;
  transition: opacity 0.2s ease;
}

.ProseMirror .drag-handle:hover {
  opacity: 1;
}

.ProseMirror .ProseMirror-dropcursor {
  border-color: #3b82f6;
  border-width: 2px;
}

/* æ‹–æ‹½å ä½ç¬¦åŠ¨ç”» */
.ProseMirror .ProseMirror-dropcursor {
  animation: dropcursorPulse 0.6s ease-in-out infinite alternate;
}

@keyframes dropcursorPulse {
  from { opacity: 0.6; }
  to { opacity: 1; }
}

/* å—æ‹–æ‹½åé¦ˆ */
.block-dragging {
  opacity: 0.5;
  transform: rotate(2deg);
  transition: all 0.2s ease;
}

/* ================= Global dark mode overrides (html.dark) ================= */
/* These are intentionally minimal overrides so toggling html.dark changes the page look. */
html.dark {
  color-scheme: dark;
  background-color: #0b1220; /* darker page background */
}

html.dark body,
html.dark #app,
html.dark .app-layout,
html.dark .main-content {
  background-color: #0b1220 !important; /* page-level dark bg */
  color: rgba(255, 255, 255, 0.92) !important;
}

/* make buttons visible in dark mode */
html.dark button {
  background-color: #1f2937 !important; /* slate-800 */
  color: #f3f4f6 !important; /* gray-100 */
  border-color: rgba(255,255,255,0.04) !important;
}

/* cards and panels */
html.dark .card,
html.dark .editor-wrapper,
html.dark .page-container,
html.dark .page-content {
  background-color: #0f1724 !important; /* darker panel */
  color: rgba(255,255,255,0.9) !important;
}

/* ProseMirror editor content text color */
html.dark .ProseMirror,
html.dark .ProseMirror p,
html.dark .ProseMirror h1,
html.dark .ProseMirror h2,
html.dark .ProseMirror h3,
html.dark .ProseMirror h4,
html.dark .ProseMirror h5,
html.dark .ProseMirror h6 {
  color: rgba(255,255,255,0.92) !important;
}

/* Links in dark mode */
html.dark a {
  color: #60a5fa !important; /* blue-400 */
}

/* Floating toggle button visibility (ensure contrast) */
html.dark .float-theme-toggle .toggle-btn {
  background-color: #374151 !important; /* slate-700 */
  color: #fff !important;
}

/* Added: target the component's root class directly (our component uses .float-theme-toggle on the button) */
html.dark .float-theme-toggle {
  background-color: #374151 !important; /* slate-700 */
  color: #fff !important;
  box-shadow: 0 6px 18px rgba(0,0,0,0.6) !important;
}

/* Small helper: reduce box-shadow intensity in dark */
html.dark .toggle-btn {
  box-shadow: 0 6px 18px rgba(0,0,0,0.6) !important;
}

/* Explicit light-mode rules when html is not .dark (helps revert styles) */
html:not(.dark) body,
html:not(.dark) #app,
html:not(.dark) .app-layout,
html:not(.dark) .main-content {
  background-color: #ffffff !important;
  color: #213547 !important;
}

html:not(.dark) .card,
html:not(.dark) .editor-wrapper,
html:not(.dark) .page-container,
html:not(.dark) .page-content {
  background-color: #ffffff !important;
  color: #213547 !important;
}

/* end dark-mode overrides */
